<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="background: white;">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#1a1a1a"/>
    </marker>
    <marker id="redArrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ff0000"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="25" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    COMPASS Workflow: Building Institutional Memory
  </text>
  
  <!-- Step 1: Claude Code encounters complexity -->
  <g id="step1">
    <rect x="50" y="60" width="120" height="60" rx="8" fill="none" stroke="#1a1a1a" stroke-width="2"/>
    <text x="110" y="85" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1a1a1a">Claude Code</text>
    <text x="110" y="100" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#1a1a1a">encounters</text>
    <text x="110" y="113" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#1a1a1a">complexity</text>
  </g>
  
  <!-- Step 2: Auto-documentation trigger -->
  <g id="step2">
    <rect x="280" y="60" width="120" height="60" rx="8" fill="#ff0000" fill-opacity="0.1" stroke="#ff0000" stroke-width="2"/>
    <text x="340" y="80" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1a1a1a">Auto-Trigger</text>
    <text x="340" y="95" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#1a1a1a">Investigation</text>
    <text x="340" y="108" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#1a1a1a">Documentation</text>
  </g>
  
  <!-- Arrow 1 -->
  <path d="M170,90 L280,90" stroke="#1a1a1a" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="225" y="75" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">
    "I need more info..."
  </text>
  
  <!-- Arrow 2 -->
  <path d="M400,90 L460,90" stroke="#1a1a1a" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Step 3: docs/ directory -->
  <g id="step3">
    <rect x="470" y="40" width="120" height="100" rx="8" fill="none" stroke="#1a1a1a" stroke-width="2"/>
    <text x="530" y="60" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1a1a1a">docs/</text>
    
    <!-- File examples -->
    <rect x="480" y="70" width="100" height="15" rx="2" fill="#1a1a1a" fill-opacity="0.1"/>
    <text x="485" y="81" font-family="Arial, sans-serif" font-size="9" fill="#1a1a1a">auth-investigation.md</text>
    
    <rect x="480" y="90" width="100" height="15" rx="2" fill="#1a1a1a" fill-opacity="0.1"/>
    <text x="485" y="101" font-family="Arial, sans-serif" font-size="9" fill="#1a1a1a">async-patterns.md</text>
    
    <rect x="480" y="110" width="100" height="15" rx="2" fill="#1a1a1a" fill-opacity="0.1"/>
    <text x="485" y="121" font-family="Arial, sans-serif" font-size="9" fill="#1a1a1a">performance-analysis.md</text>
  </g>
  
  <!-- Arrow 3 (bidirectional) -->
  <path d="M530,140 L530,180" stroke="#1a1a1a" stroke-width="2" marker-end="url(#arrow)"/>
  <path d="M540,180 L540,140" stroke="#1a1a1a" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="555" y="162" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#666">GENERATES</text>
  
  <!-- Step 4: maps/ directory -->
  <g id="step4">
    <rect x="470" y="190" width="120" height="100" rx="8" fill="none" stroke="#1a1a1a" stroke-width="2"/>
    <text x="530" y="210" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1a1a1a">maps/</text>
    
    <!-- SVG examples -->
    <rect x="480" y="220" width="100" height="15" rx="2" fill="#1a1a1a" fill-opacity="0.1"/>
    <text x="485" y="231" font-family="Arial, sans-serif" font-size="9" fill="#1a1a1a">async-flow_auth.svg</text>
    
    <rect x="480" y="240" width="100" height="15" rx="2" fill="#1a1a1a" fill-opacity="0.1"/>
    <text x="485" y="251" font-family="Arial, sans-serif" font-size="9" fill="#1a1a1a">error-patterns.svg</text>
    
    <rect x="480" y="260" width="100" height="15" rx="2" fill="#1a1a1a" fill-opacity="0.1"/>
    <text x="485" y="271" font-family="Arial, sans-serif" font-size="9" fill="#1a1a1a">map-index.json</text>
  </g>
  
  <!-- Arrow 4: Pattern recognition -->
  <path d="M590,245 L650,245" stroke="#ff0000" stroke-width="2" marker-end="url(#redArrow)"/>
  <text x="620" y="235" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ff0000">
    pattern
  </text>
  <text x="620" y="257" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ff0000">
    recognition
  </text>
  
  <!-- Step 5: Enhanced Claude Code -->
  <g id="step5">
    <rect x="660" y="200" width="150" height="90" rx="8" fill="#ff0000" fill-opacity="0.05" stroke="#ff0000" stroke-width="2"/>
    <text x="735" y="220" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#1a1a1a">Enhanced Claude Code</text>
    <text x="735" y="238" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1a1a1a">"Looking at our async flow</text>
    <text x="735" y="250" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1a1a1a">patterns, this creates the same</text>
    <text x="735" y="262" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1a1a1a">race condition we documented</text>
    <text x="735" y="274" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#1a1a1a">in the auth module..."</text>
  </g>
  
  <!-- Feedback loop -->
  <path d="M735,200 Q735,160 340,160 Q340,140 340,120" stroke="#ff0000" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#redArrow)"/>
  <text x="435" y="155" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ff0000" font-weight="bold">
    institutional memory builds over time
  </text>
  
  <!-- Key insight -->
  <rect x="50" y="320" width="700" height="50" rx="8" fill="#1a1a1a" fill-opacity="0.05" stroke="#1a1a1a" stroke-width="1"/>
  <text x="60" y="340" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1a1a1a">
    Key Insight:
  </text>
  <text x="130" y="340" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    Every "I need more information..." moment becomes permanent knowledge through automatic documentation
  </text>
  <text x="60" y="355" font-family="Arial, sans-serif" font-size="12" fill="#1a1a1a">
    and visual pattern mapping, creating a continuously learning development environment.
  </text>
  
  <!-- Metadata -->
  <metadata>
    <analysis-data>
      <diagram-type>workflow</diagram-type>
      <purpose>system-explanation</purpose>
      <focus>institutional-memory-building</focus>
    </analysis-data>
  </metadata>
</svg>